<!DOCTYPE html>
<html lang="PT-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="description" content="Informações sobre o mundo da tecnologia no blog vctech">
        <meta name="keywords" content="vctech, tecnologia, blog, posts">
        <meta name="author" content="vctech">
        <title>Posts</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/flexbox.css">
        <link rel="stylesheet" href="css/bootstrap-grid.css">
        <link rel="stylesheet" href="css/post.css">
        <link rel="stylesheet" href="css/newsletter.css">
        <link rel="stylesheet" href="css/header.css">
        <link rel="stylesheet" href="css/footer.css">
        <link rel="stylesheet" href="css/popup.css">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-P8RXR66');</script>
        <!-- End Google Tag Manager -->
        
        <script>
            function includeHTML() {
              var z, i, elmnt, file, xhttp;
              /* Loop through a collection of all HTML elements: */
              z = document.getElementsByTagName("*");
              for (i = 0; i < z.length; i++) {
                elmnt = z[i];
                /*search for elements with a certain atrribute:*/
                file = elmnt.getAttribute("w3-include-html");
                if (file) {
                  /* Make an HTTP request using the attribute value as the file name: */
                  xhttp = new XMLHttpRequest();
                  xhttp.onreadystatechange = function() {
                    if (this.readyState == 4) {
                      if (this.status == 200) {elmnt.innerHTML = this.responseText;}
                      if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
                      /* Remove the attribute, and call this function once more: */
                      elmnt.removeAttribute("w3-include-html");
                      includeHTML();
                    }
                  }
                  xhttp.open("GET", file, true);
                  xhttp.send();
                  /* Exit the function: */
                  return;
                }
              }
            }
        </script>
    </head>
    <body> 
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P8RXR66"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->

        <div w3-include-html="header.html"></div>

        <main class="conteudoPrincipal">
            <div class="container">          
                <div class="conteudo-principal-bloco">
                    <h1>Faça nosso Quiz!</h1>                
                    <div class="quiz" >
                         <!-- Código do Quiz-->
                         <div id="interact-5e264f6859e9660014f70951"></div><script type="text/javascript">var app_5e264f6859e9660014f70951;(function(d, t){var s=d.createElement(t),options={"appId":"5e264f6859e9660014f70951","width":"800","height":"800","async":true,"host":"quiz.tryinteract.com","auto_resize":false};s.src='https://i.tryinteract.com/embed/app.js';s.onload=s.onreadystatechange=function(){var rs=this.readyState;if(rs)if(rs!='complete')if(rs!='loaded')return;try{app_5e264f6859e9660014f70951=new InteractApp();app_5e264f6859e9660014f70951.initialize(options);app_5e264f6859e9660014f70951.display();}catch(e){}};var scr=d.getElementsByTagName(t)[0],par=scr.parentNode;par.insertBefore(s,scr);})(document,'script');</script>
                        <!-- Fim do código do Quiz -->
                    </div>      
                </div>                   
            </div>
        </main>

        <div w3-include-html="footer.html"></div> 

        <div id="modal_container" class="modal_container">
            <div id="popup-aviso" class="popup-aviso">
                <div class="modal_aviso">
                    <div class="titulo-news"><h2>Preencha aqui para fazer seu quiz e receba as melhores dicas</h2></div>
                    <img src="img/newsletter_image.jpg" alt="Imagem ilustrativa de pessoa usando o celular">
                    <form method="POST" action="https://smtl.gama.academy/leads/3d935292-39f4-11ea-a319-e90cfbc180ef">
                        <div class="conteudoPrincipal-formulario-input" >
                        <label for="nome">Nome</label>
                        <input
                        id="nome"
                          name="name"
                          type="text"
                          pattern="^\D{2,}\s[\D\s]{2,}$"
                          title="Digite seu nome completo"
                          required
                        />
                        </div>

                        <div class="conteudo-principal-formulario-input" >
                            <label for="email">E-mail</label>
                        <input
                        id="email"
                          name="email"
                          type="email"
                          title="Digite um email válido"
                          required
                        />
                        </div>     
                                      
                        <input name="debugMode" type="hidden" value="false" />
                        <button type="submit" onclick="submitForm()">Enviar</button>
                    </form>                 
                </div>
            </div>
        </div>

        <script>

            function iniciaModal(modalID) {
                if (localStorage.fechaModal !== modalID) {
                    const modal = document.getElementById(modalID);        
                    if (modal) {
                        modal.classList.add('mostrar');
                        if (document.getElementById("nome").value.length > 0) {
                            modal.addEventListener('click', (e) => {
                                if (e.target.tagName == 'BUTTON') {
                                    console.log(document.getElementById("nome").value.length);
                                    modal.classList.remove('mostrar');
                                    localStorage.fechaModal = modalID;
        
        
                                }
                            });
                        }        
                    }
        
                }
            }
        
            const cont = document.querySelector('.quiz');
            cont.addEventListener('click', () => iniciaModal('modal_container'));
        
            document.addEventListener('scroll', () => { if (window.pageYOffset > 200) { iniciaModal('modal_container') } })
        
        
        </script>
        <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase.js"></script>
          <script>
            var firebaseConfig = {
              apiKey: "AIzaSyAqxnZHJP1WUm15PklNPpb5xqqIcbeRKy0",
              authDomain: "vctech-c0a31.firebaseapp.com",
              databaseURL: "https://vctech-c0a31.firebaseio.com",
              projectId: "vctech-c0a31",
              storageBucket: "vctech-c0a31.appspot.com",
              messagingSenderId: "522739906498",
              appId: "1:522739906498:web:4d7bc21b3abd29c918085b"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);

            var database = firebase.database();
            var messagesRef = firebase.database().ref('messages');




          // Listen for form submit
          //document.getElementsByTagName("FORM")[0].addEventListener('submit', submitForm);
          // Submit form
          submitForm = function() {


            var nomeInput = document.getElementById('nome').value;
            var emailInput = document.getElementById('email').value;
            var dataAtt = new Date().toString();


            // Save message
            saveMessage(nomeInput, emailInput, dataAtt);

          }

          //Salvar dados no banco
          function saveMessage(nomeInput, emailInput,dataAtt) {
            var newMessageRef = messagesRef.push();
            newMessageRef.set({
              nomeInput: nomeInput,
              emailInput: emailInput,
              dataAtual: dataAtt
            });
          }
          </script>
          
          <script src="js/app.js"></script>
          
          <script>includeHTML();</script>
    </body>
</html>